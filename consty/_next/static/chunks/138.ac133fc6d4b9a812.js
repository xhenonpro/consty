"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[138],{7138:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var r=a(5155),l=a(2115);function n(e){let{onClose:t,onSave:a,task:n}=e,[d,o]=(0,l.useState)((null==n?void 0:n.name)||""),[s,i]=(0,l.useState)((null==n?void 0:n.project_id)||""),[u,c]=(0,l.useState)((null==n?void 0:n.deadline)||""),[g,p]=(0,l.useState)((null==n?void 0:n.status)||"pending"),[b,x]=(0,l.useState)(!1),[h,v]=(0,l.useState)("");(0,l.useEffect)(()=>{o((null==n?void 0:n.name)||""),i((null==n?void 0:n.project_id)||""),c((null==n?void 0:n.deadline)||""),p((null==n?void 0:n.status)||"pending")},[n]);let f=async e=>{e.preventDefault(),x(!0),v("");let t=n?"PATCH":"POST",r=n?{id:n.id,name:d,project_id:s,deadline:u,status:g}:{name:d,project_id:s,deadline:u,status:g},l=await fetch("http://localhost/consty/api/tasks.php",{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),o=await l.json();if(x(!1),!l.ok)return void v(o.error||"Failed to save task.");a()};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 animate-fadeIn",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 w-full max-w-md relative",children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-2xl text-gray-400 hover:text-red-500",children:"\xd7"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700 dark:text-blue-300",children:n?"Edit Task":"Add Task"}),h&&(0,r.jsx)("div",{className:"mb-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded-lg",children:h}),(0,r.jsxs)("form",{onSubmit:f,className:"flex flex-col gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Name",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:d,onChange:e=>o(e.target.value),required:!0}),(0,r.jsx)("input",{type:"number",placeholder:"Project ID",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:s,onChange:e=>i(e.target.value)}),(0,r.jsx)("input",{type:"date",placeholder:"Deadline",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:u,onChange:e=>c(e.target.value)}),(0,r.jsxs)("select",{className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:g,onChange:e=>p(e.target.value),children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"in progress",children:"In Progress"}),(0,r.jsx)("option",{value:"completed",children:"Completed"})]}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-xl shadow transition text-lg disabled:opacity-60",disabled:b,children:b?n?"Saving...":"Adding...":n?"Save Changes":"Add Task"})]})]})})}}}]);