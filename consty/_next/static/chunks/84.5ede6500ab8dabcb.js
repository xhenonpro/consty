"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{6084:(e,r,a)=>{a.r(r),a.d(r,{default:()=>s});var l=a(5155),t=a(2115);function s(e){let{onClose:r,onSave:a,user:s}=e,[d,n]=(0,t.useState)((null==s?void 0:s.username)||""),[o,i]=(0,t.useState)((null==s?void 0:s.email)||""),[u,c]=(0,t.useState)((null==s?void 0:s.role)||"user"),[b,g]=(0,t.useState)(""),[p,x]=(0,t.useState)(!1),[h,v]=(0,t.useState)("");(0,t.useEffect)(()=>{n((null==s?void 0:s.username)||""),i((null==s?void 0:s.email)||""),c((null==s?void 0:s.role)||"user"),g("")},[s]);let m=async e=>{e.preventDefault(),x(!0),v("");let r=s?"PATCH":"POST",l=s?{id:s.id,username:d,email:o,role:u,password:b||void 0}:{username:d,email:o,role:u,password:b},t=await fetch("http://localhost/consty/api/users.php",{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),n=await t.json();if(x(!1),!t.ok)return void v(n.error||"Failed to save user.");a()};return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 animate-fadeIn",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 w-full max-w-md relative",children:[(0,l.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-2xl text-gray-400 hover:text-red-500",children:"\xd7"}),(0,l.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700 dark:text-blue-300",children:s?"Edit User":"Add User"}),h&&(0,l.jsx)("div",{className:"mb-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded-lg",children:h}),(0,l.jsxs)("form",{onSubmit:m,className:"flex flex-col gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Username",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:d,onChange:e=>n(e.target.value),required:!0}),(0,l.jsx)("input",{type:"email",placeholder:"Email",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:o,onChange:e=>i(e.target.value),required:!0}),(0,l.jsxs)("select",{className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:u,onChange:e=>c(e.target.value),children:[(0,l.jsx)("option",{value:"user",children:"User"}),(0,l.jsx)("option",{value:"admin",children:"Admin"})]}),(0,l.jsx)("input",{type:"password",placeholder:s?"New Password (leave blank to keep)":"Password",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:b,onChange:e=>g(e.target.value),required:!s}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-xl shadow transition text-lg disabled:opacity-60",disabled:p,children:p?s?"Saving...":"Adding...":s?"Save Changes":"Add User"})]})]})})}}}]);