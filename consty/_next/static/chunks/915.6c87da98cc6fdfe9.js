"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{4915:(e,r,a)=>{a.r(r),a.d(r,{default:()=>o});var l=a(5155),t=a(2115);function o(e){let{onClose:r,onSave:a,employee:o}=e,[n,d]=(0,t.useState)((null==o?void 0:o.name)||""),[u,i]=(0,t.useState)((null==o?void 0:o.salary)||""),[s,p]=(0,t.useState)((null==o?void 0:o.project_id)||""),[c,g]=(0,t.useState)((null==o?void 0:o.email)||""),[b,x]=(0,t.useState)((null==o?void 0:o.phone)||""),[y,h]=(0,t.useState)(!1),[m,v]=(0,t.useState)("");(0,t.useEffect)(()=>{d((null==o?void 0:o.name)||""),i((null==o?void 0:o.salary)||""),p((null==o?void 0:o.project_id)||""),g((null==o?void 0:o.email)||""),x((null==o?void 0:o.phone)||"")},[o]);let f=async e=>{e.preventDefault(),h(!0),v("");let r=o?"PATCH":"POST",l=o?{id:o.id,name:n,salary:u,project_id:s,email:c,phone:b}:{name:n,salary:u,project_id:s,email:c,phone:b},t=await fetch("http://localhost/consty/api/employees.php",{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}),d=await t.json();if(h(!1),!t.ok)return void v(d.error||"Failed to save employee.");a()};return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 animate-fadeIn",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 w-full max-w-md relative",children:[(0,l.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-2xl text-gray-400 hover:text-red-500",children:"\xd7"}),(0,l.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700 dark:text-blue-300",children:o?"Edit Employee":"Add Employee"}),m&&(0,l.jsx)("div",{className:"mb-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded-lg",children:m}),(0,l.jsxs)("form",{onSubmit:f,className:"flex flex-col gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Name",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:n,onChange:e=>d(e.target.value),required:!0}),(0,l.jsx)("input",{type:"number",placeholder:"Salary",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:u,onChange:e=>i(e.target.value),required:!0}),(0,l.jsx)("input",{type:"number",placeholder:"Project ID",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:s,onChange:e=>p(e.target.value)}),(0,l.jsx)("input",{type:"email",placeholder:"Email",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:c,onChange:e=>g(e.target.value)}),(0,l.jsx)("input",{type:"text",placeholder:"Phone",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:b,onChange:e=>x(e.target.value)}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-xl shadow transition text-lg disabled:opacity-60",disabled:y,children:y?o?"Saving...":"Adding...":o?"Save Changes":"Add Employee"})]})]})})}}}]);