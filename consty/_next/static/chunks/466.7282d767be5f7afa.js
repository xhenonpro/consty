"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{2085:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var r=a(5155),l=a(2115);function n(e){let{onClose:t,onSave:a,material:n}=e,[d,i]=(0,l.useState)((null==n?void 0:n.name)||""),[o,s]=(0,l.useState)((null==n?void 0:n.quantity)||""),[u,c]=(0,l.useState)((null==n?void 0:n.price)||""),[b,g]=(0,l.useState)(!1),[p,x]=(0,l.useState)("");(0,l.useEffect)(()=>{i((null==n?void 0:n.name)||""),s((null==n?void 0:n.quantity)||""),c((null==n?void 0:n.price)||"")},[n]);let h=async e=>{e.preventDefault(),g(!0),x("");let t=n?"PATCH":"POST",r=n?{id:n.id,name:d,quantity:o,price:u}:{name:d,quantity:o,price:u},l=await fetch("http://localhost/consty/api/materials.php",{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),i=await l.json();if(g(!1),!l.ok)return void x(i.error||"Failed to save material.");a()};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 animate-fadeIn",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-8 w-full max-w-md relative",children:[(0,r.jsx)("button",{onClick:t,className:"absolute top-4 right-4 text-2xl text-gray-400 hover:text-red-500",children:"\xd7"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-blue-700 dark:text-blue-300",children:n?"Edit Material":"Add Material"}),p&&(0,r.jsx)("div",{className:"mb-4 bg-red-100 border border-red-300 text-red-700 px-4 py-2 rounded-lg",children:p}),(0,r.jsxs)("form",{onSubmit:h,className:"flex flex-col gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Name",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:d,onChange:e=>i(e.target.value),required:!0}),(0,r.jsx)("input",{type:"number",placeholder:"Quantity",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:o,onChange:e=>s(e.target.value),required:!0}),(0,r.jsx)("input",{type:"number",placeholder:"Price",className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-700 focus:ring-2 focus:ring-blue-400 outline-none",value:u,onChange:e=>c(e.target.value),required:!0}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-xl shadow transition text-lg disabled:opacity-60",disabled:b,children:b?n?"Saving...":"Adding...":n?"Save Changes":"Add Material"})]})]})})}}}]);